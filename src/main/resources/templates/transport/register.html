<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Registrar Transporte</title>
        <link rel="stylesheet" th:href="@{/css/common.css}"/>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"/>
    </head>
    <body>

        <div th:replace="~{fragments/sidebar :: sidebar}"></div>

        <div class="main-content">
            <div id="swal-message" th:data-mensaje="${mensaje}" th:data-error="${error}"></div>

            <form method="POST" th:action="@{/transport/register}" class="form-container ">
                <div class="page-header" style="border-bottom: none; margin-bottom: 15px;">
                    <h1 class="page-title">Registrar Transporte</h1>
                </div>

                <div class="form-group">
                    <label class="form-label" for="transport_date">Fecha de registro del Transporte:</label>
                    <input type="date" id="transport_date" name="transportDate" class="form-input" required
                           th:value="${transport?.transportDate}"/>
                </div>

                <div class="form-group">
                    <label class="form-label" for="transport_type">Tipo de Transporte:</label>
                    <select id="transport_type" name="transportType" class="form-select" required>
                        <option value="">Seleccione un tipo</option>
                        <option value="Camión de carga">Camión de carga</option>
                        <option value="Furgón de carga">Furgón de carga</option>
                        <option value="Barco">Barco</option>
                        <option value="Pickup de la empresa">Pickup de la empresa</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="transport_company">Empresa de Transporte:</label>
                    <input type="text" id="transport_company" name="transportCompany" class="form-input" required
                           th:value="${transport?.transportCompany}" placeholder="Ej: Transportes Del Monte"/>
                </div>

                <div class="form-group">
                    <label class="form-label" for="driver_name">Nombre del Conductor:</label>
                    <input type="text" id="driver_name" name="driverName" class="form-input" required
                           th:value="${transport?.driverName}" placeholder="Ej: Juan Pérez"/>
                </div>

                <div class="form-group">
                    <label class="form-label" for="driver_phone">Teléfono del Conductor:</label>
                    <input type="tel" id="driver_phone" name="driverPhone" class="form-input"
                           th:value="${transport?.driverPhone}" placeholder="Ej: 87654321"/>
                </div>

                <!-- Nuevos campos -->
                <div class="form-group">
                    <label class="form-label" for="vehicle_plate">Placa del Vehículo:</label>
                    <input type="text" id="vehicle_plate" name="vehiclePlate" class="form-input" required
                           th:value="${transport?.vehiclePlate}" placeholder="Ej: ABC123"/>
                </div>

                <div class="form-group">
                    <label class="form-label" for="transport_cost">Costo del Transporte:</label>
                    <input type="number" step="0.01" id="transport_cost" name="transportCost" class="form-input" required
                           th:value="${transport?.transportCost}" placeholder="Ej: 150.50"/>
                </div>
                <!-- Estado del Transporte (Requerido) -->
                <div class="form-group">
                    <label class="form-label">Estado del Transporte:</label>
                    <div style="display: flex; gap: 15px;">
                        <label class="checkbox-label">
                            <input type="radio" name="status" value="Entregado" required> Entregado
                        </label>
                        <label class="checkbox-label">
                            <input type="radio" name="status" value="Pendiente"> Pendiente
                        </label>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <span class="material-symbols-outlined icon">save</span> Registrar Transporte
                    </button>
                    <a th:href="@{/transport/list}" class="btn btn-secondary">
                        <span class="material-symbols-outlined icon">cancel</span> Cancelar
                    </a>
                </div>
            </form>
        </div>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const swalDiv = document.getElementById("swal-message");

                if (swalDiv) {
                    const mensaje = swalDiv.dataset.mensaje;
                    const error = swalDiv.dataset.error;

                    if (mensaje) {
                        Swal.fire({
                            icon: 'success',
                            title: '¡Éxito!',
                            text: mensaje,
                            confirmButtonText: 'Aceptar',
                            customClass: {
                                popup: 'swal2-agrow-popup',
                                title: 'swal2-agrow-title',
                                confirmButton: 'btn btn-success'
                            },
                            buttonsStyling: false
                        });
                    }

                    if (error) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: error,
                            confirmButtonText: 'Aceptar',
                            customClass: {
                                popup: 'swal2-agrow-popup',
                                title: 'swal2-agrow-title',
                                confirmButton: 'btn btn-danger'
                            },
                            buttonsStyling: false
                        });
                    }
                }
            });
        </script>

        <script th:src="@{/js/transport.js}"></script>
    </body>